<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<!-- 管理员持久化层XML配置继承IRoleDao -->
<mapper namespace="com.mingsoft.freight.dao.IFreightDao">

	<!-- 将实体属性与表字段对接开始 -->
	<resultMap id="resultMap" type="com.mingsoft.freight.entity.FreightEntity">
		<id column="freight_id" property="freightId" />
		<result column="freight_city_id" property="freightCityId" />
		<result column="freight_express_id" property="freightExpressId" />
		<result column="freight_base_price" property="freightBasePrice" />
		<result column="freight_base_amount" property="freightBaseAmount" />
		<result column="freight_increase_price" property="freightIncreasePrice" />
		<result column="freight_increase_amount" property="freightIncreaseAmount" />
		<result column="freight_enable" property="freightEnable" />
		<association property="freExpress" column="freight_express_id" 
			javaType="com.mingsoft.basic.entity.CategoryEntity">
		  	<id property="categoryId" column="CATEGORY_ID"/>
		  	<result property="categoryTitle" column="CATEGORY_TITLE"/>
		</association>
	</resultMap>
	<!-- 将实体属性与表字段对接结束 -->
	<!-- 查询基础数据开始 -->
	<select id="queryByCity" resultMap="resultMap" parameterType="int">	
		select * from freight 		
		<where> 
			and freight_city_id= #{freightCityId}			
		</where>
	</select>
	<!-- 查询用户列表结束 -->
	
	<!-- 查询基础数据开始 -->
	<select id="queryByCityExpress" resultMap="resultMap" parameterType="com.mingsoft.freight.entity.FreightEntity">	
		select * from freight 		
		<where> 
			 and freight_express_id = #{freightExpressId} and freight_city_id= #{freightCityId}			
		</where>
	</select>
	<!-- 查询用户列表结束 -->
	
	<!-- 查询城市列表开始 -->
	<select id="queryAllFreight" resultMap="resultMap" parameterType="com.mingsoft.freight.entity.FreightEntity">	
		SELECT c.CATEGORY_ID,c.CATEGORY_TITLE,
		fre.freight_city_id,fre.freight_express_id,fre.freight_base_price,fre.freight_base_amount,
		fre.freight_increase_price,fre.freight_increase_amount,fre.freight_enable
		FROM category c 
		LEFT JOIN freight fre
		ON c.CATEGORY_ID = fre.freight_express_id and fre.freight_city_id = #{freightCityId}
		WHERE c.CATEGORY_MODELID = #{categoryModelId} AND c.category_del=0
	</select>
	<!-- 查询城市列表结束 -->
	
	<!-- 新增用户开始 -->
	<insert id="saveEntity" useGeneratedKeys="true" keyProperty="peopleId" parameterType="com.mingsoft.freight.entity.FreightEntity">
		insert into freight
		<!-- 添加表字段 -->
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="freightCityId != null">freight_city_id,</if>
			<if test="freightExpressId !=null">freight_express_id,</if>
			<if test="freightBasePrice !=null">freight_base_price,</if>
			<if test="freightBaseAmount !=null">freight_base_amount,</if>
			<if test="freightIncreasePrice !=null">freight_increase_price,</if>
			<if test="freightIncreaseAmount !=null">freight_increase_amount,</if>
			<if test="freightEnable !=null">freight_enable,</if>
		</trim>
		<!-- 注入控制层字段 -->
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="freightCityId != null">#{freightCityId},</if>
			<if test="freightExpressId !=null">#{freightExpressId},</if>
			<if test="freightBasePrice !=null">#{freightBasePrice},</if>
			<if test="freightBaseAmount !=null">#{freightBaseAmount},</if>
			<if test="freightIncreasePrice !=null">#{freightIncreasePrice},</if>
			<if test="freightIncreaseAmount !=null">#{freightIncreaseAmount},</if>	
			<if test="freightEnable !=null">#{freightEnable},</if>		
		</trim>
		
	</insert>
	<!-- 新增用户结束 -->
	
	<!-- 更新用户开始 -->
	<update id="updateEntity" parameterType="com.mingsoft.freight.entity.FreightEntity">
		update freight
		<set>
			<if test="freightBasePrice !=null">freight_base_price=#{freightBasePrice},</if>
			<if test="freightBaseAmount !=null">freight_base_amount=#{freightBaseAmount},</if>
			<if test="freightIncreasePrice !=null">freight_increase_price=#{freightIncreasePrice},</if>
			<if test="freightIncreaseAmount !=null">freight_increase_amount=#{freightIncreaseAmount},</if>
			<if test="freightEnable != null">freight_enable=#{freightEnable},</if>
		</set>
		where freight_express_id = #{freightExpressId} and freight_city_id = #{freightCityId}
	</update>
	<!-- 更新用户结束 -->
	
</mapper>