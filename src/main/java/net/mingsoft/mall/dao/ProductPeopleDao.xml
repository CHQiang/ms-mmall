<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="net.mingsoft.mall.dao.IProductPeopleDao">

	<sql id="column_list">
		BASIC_ID,BASIC_TITLE,BASIC_DESCRIPTION,
		BASIC_THUMBNAILS,BASIC_HIT,BASIC_SORT,BASIC_CATEGORYID,
		BASIC_APPID,BASIC_MODELID,product_basicID,
		product_price,product_cost_price,
		product_appID,product_code,product_linkUrl,
		product_sale
	</sql>

	<!--关注商品列表的返回值 -->
	<resultMap id="resultMap" type="net.mingsoft.mall.entity.ProductEntity">
		<id column="BASIC_ID" property="basicId" />							<!-- 商品自增长id -->
		<result column="BASIC_TITLE" property="basicTitle" />				<!-- 商品标题 -->
		<result column="BASIC_HIT" property="basicHit" />					<!-- 商品点击量 -->
		<result column="BASIC_DESCRIPTION" property="basicDescription" />	<!-- 商品描述 -->
		<result column="BASIC_THUMBNAILS" property="basicThumbnails" />		<!-- 商品缩略图 -->
		<result column="BASIC_APPID" property="basicAppId" />				<!-- 商品的应用id -->
		<result column="product_price" property="productPrice" />			<!-- 商品价格 -->
		<result column="product_inventory" property="productStock" />		<!-- 商品库存量 -->
		<result column="product_code" property="productCode" />				<!-- 商品编码 -->
		<result column="product_sale" property="productSale" />				<!-- 商品销量 -->
		<result column="product_linkUrl" property="productLinkUrl" />		<!-- 商品链接 -->
		<result column="product_cost_price" property="productCostPrice" />	<!-- 商品原价-->
	</resultMap>

	<select id="query" resultMap="resultMap">
		SELECT * FROM basic_people
		LEFT JOIN basic ON bp_basic_id = BASIC_ID
		LEFT JOIN mall_product ON BASIC_ID = product_basicID AND product_appID = BASIC_APPID  
		<where>	
				and BASIC_MODELID = #{modelId}
				and BASIC_APPID = #{appId}
				<if test="peopleId &gt; 0"> and bp_people_id=#{peopleId} </if>	
		</where>		
		order by bp_id desc
	</select>


</mapper>	